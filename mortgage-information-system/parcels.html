<!doctype html>
<html>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="Benben is a digital land database providing fast easy access to trusted land content">
    <meta name="author" content="nii.nortey@gmail.com">
    <link rel="apple-touch-icon" href="../assets/img/apple-touch-icon.png">
    <link rel="shortcut icon" href="../assets/img/favicon.ico">
    <title>BenBen</title>

    <!-- Fonts -->

    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link href="../assets/css/font-awesome.css" rel='stylesheet' type='text/css'>

    <!-- Styling -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="../assets/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
    <link href="../assets/css/benben-theme.css" rel="stylesheet"  type="text/css">
    <link href="../assets/js/leaflet/leaflet.css" rel="stylesheet" type="text/css">

    <!--[if lt IE 9]>
              <script src="../assets/js/html5shiv/html5shiv.js"></script>
    <![endif]-->

    <!-- JQuery  -->

    <script src="../assets/js/jquery/jquery-1.12.3.min.js" type="text/javascript"></script>
</head><body>
    <!--[if lt IE 8]>
                  <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
              <![endif]-->

    <div class="appMain">
        <nav class="navbar navbar-default">
            <div class="container-fluid"> 
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
                    <img class="navbar-brand-logo" src="../assets/img/benben-logo.png" title="BenBen"> <span class="navbar-brand-text"> BenBen</span> </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#"><i class="glyphicon glyphicon-cog"></i></a> </li>
                        <li><a href="#" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><i class="glyphicon glyphicon-user"></i> <span class="caret"></span></a>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                <li><a href="#">Profile</a></li>
                                <li><a href="#"> Set Up Payment</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="#">Log-Out</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <!-- /.navbar-collapse --> 
            </div>
            <!-- /.container-fluid --> 
        </nav>
        <div id="benbenNav">
            <nav class="navbar">
                <div class="container-fluid"> 
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav">
                            <li ><a href="dashboard.html"><i class="fa fa-tachometer" aria-hidden="true"></i> Dashboard </a> </li>
                            <li><a href="search.html"><i class="fa fa-search" aria-hidden="true"></i> Search</a> </li>
                            <li><a href="payments.html"><i class="fa fa-credit-card" aria-hidden="true"></i> Payments</a> </li>
                            <li><a href="todo.html"><i class="fa fa-tasks" aria-hidden="true"></i> To Do</a> </li>
                            <li><a href="mydocs.html"><i class="fa fa-file-text-o" aria-hidden="true"></i> My Docs</a> </li>
                        </ul>
                    </div>
                    <!-- /.navbar-collapse --> 
                </div>
                <!-- /.container-fluid --> 
            </nav>
        </div>
        <div class="row">
            <div class="col-md-5 serachBox">
                <div class="searchTitle">East Legon, Accra</div>

                <div class="btn-toolbar nomobile"  style="margin-bottom: 0.5em; margin-top: 0.5em;">
                    <div class="btn-grooop"  style="margin-left: 0; margin: 0 auto;">
                        <a class="btn btn-primary btn-lg active"   href="overview.html">
                            <i class="glyphicon glyphicon-eye-open"></i>
                            &nbsp;
                            Overview
                        </a>&nbsp;&nbsp;
                        <a class="btn btn-primary btn-lg"   href="parcels.html">
                            <i class="glyphicon glyphicon-filter"></i>
                            &nbsp;&nbsp;
                            Explore
                        </a>
                        &nbsp;
                        <a class="btn btn-primary btn-lg"   href="search.html">
                            <i class="glyphicon glyphicon-search"></i>
                            &nbsp;
                            Search
                        </a>
                    </div>
                </div>
               <div class="text-center" style="display: block;">
<h4 style="margin-bottom: 0;">Try these citywide layers:</h4><br/><br/>
<a class="btn btn-info btn-sm" data-preset="1" href="#">Publicly owned, structures vs. lots</a>
<a class="btn btn-info btn-sm" data-preset="2" href="#">Occupancy</a><br/><br/>
<a class="btn btn-info btn-sm" data-preset="3" href="#">Lots with dumping + houses needing boarding</a>
<a class="btn btn-info btn-sm active" data-preset="4" href="#">Auction properties, show surveyed</a>

</div>
                
                

            </div>
            <div class="col-md-7 searchMap">
                <div id="mapHolder">


                </div>

            </div>
        </div>

        <!-- Core  --> 

        <script  src="../assets/js/bootstrap/bootstrap.min.js" type="text/javascript"></script> 
        
        <script src="../assets/js/leaflet/leaflet.js" type="text/javascript"></script> 
        <script src="eastlegon.js" type="text/javascript"></script>

        <script>

            //Map


            var map = L.map('mapHolder').setView([5.629265210427313, -0.165195452969745, ], 15);

            L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
                        '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                        'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
                id: 'mapbox.light'
            }).addTo(map);




            // control that shows Parcel info on hover
            var info = L.control();

            info.onAdd = function (map) {
                this._div = L.DomUtil.create('div', 'info');
                this.update();
                return this._div;
            };

            info.update = function (props) {
                this._div.innerHTML = '<h5>BenBen Land Parcel Data</h5>' + (props ?
                        '<b>' + props.address + '</b><br />' + 'Usage: ' + props.use + '<br />' + 'Occupancy: ' + props.occupancy + '<br />' + 'Structure: ' + props.structure :
                        'Hover over a parcel');
            };

            info.addTo(map);





            // get color depending on population density value
            function getColor(d) {

                if (d == "residential") {
                    return "#b30059";
                    exit;
                }
                if (d == "commercial") {
                    return "#5073e6";
                    exit;
                }
                if (d == "mixed") {
                    return "#e6e620";
                    exit;
                }
                if (d == "industrial") {
                    return "#5c00b3";
                    exit;
                }
                if (d == "institutional") {
                    return "#2db802";
                    exit;
                }
                if (d == "other") {
                    return "#0074b3";
                    exit;
                }
                if (d == "unknown") {
                    return "gold";
                    exit;
                }
                if (d == "vacant") {
                    return "#e66c15'";
                    exit;
                }
                if (d == "parking") {
                    return "#e3e6e1";
                    exit;
                }
                if (d == "park") {
                    return "red";
                    exit;
                }



            }

            function style(feature) {
                return {
                    fillColor: getColor(feature.properties.use),
                    weight: 2,
                    opacity: 1,
                    color: 'white',
                    dashArray: '',
                    fillOpacity: 0.7
                };
            }

            L.geoJson(parcelData, {style: style}).addTo(map);







            function highlightFeature(e) {
                var layer = e.target;

                layer.setStyle({
                    weight: 1,
                    color: '#666',
                    dashArray: '',
                    fillOpacity: 0.7
                });

                if (!L.Browser.ie && !L.Browser.opera) {
                    layer.bringToFront();
                }

                info.update(layer.feature.properties);
            }

            var geojson;

            function resetHighlight(e) {
                geojson.resetStyle(e.target);

                info.update();
            }

            function zoomToFeature(e) {
                map.fitBounds(e.target.getBounds());
            }

            function onEachFeature(feature, layer) {
                layer.on({
                    mouseover: highlightFeature,
                    mouseout: resetHighlight,
                    click: zoomToFeature
                });
            }

            geojson = L.geoJson(parcelData, {
                style: style,
                onEachFeature: onEachFeature
            }).addTo(map);

            map.attributionControl.addAttribution('Map Data &copy; <a href="http://www.ghanalap.gov.gh/index.php/">Ghana Lands Commission</a>');


            var legend = L.control({
                position: 'bottomright'
            });

            legend.onAdd = function (map) {


                var div = L.DomUtil.create('div', 'info legend'),
                        grades = ["#b30059", "#5073e6", "0074b3", "#2db802", "#5c00b3", "gold", "#e3e6e1", "red"]


                for (var i = 0; i < grades.length; i++) {
                    from = grades[i];

                    labels.push('<i style="background:' + getColor(from + 1) + '"></i>');
                }

                div.innerHTML = labels.join('<br>');
                return div;
            };

            legend.addTo(map);


            //Tabs Settings

            $('#mapTabs a').click(function (e) {
                e.preventDefault()
                $(this).tab('show')

            })

            // Photo Gallery 
            Galleria.loadTheme('../assets/js/galleria/themes/classic/galleria.classic.min.js');
            Galleria.run('.galleria');
            Galleria.configure('slide', 'height');

            //Details

            $("#detailItemsBtn").click(function () {
                $("#detailsPay").hide();
                $("#paymentInfo").show();

                event.preventDefault();
            });

            $("#paymentInfoBtn").click(function () {
                $("#paymentInfo").hide();
                $("#detailsInfo").show();

                event.preventDefault();
            });

            $("#backdetailItemsBtn").click(function () {
                $("#paymentInfo").hide();
                $("#detailsPay").show();

                event.preventDefault();
            });


            //Payment Options

            var paymentOptions = jQuery('#paymentOptions');
            var select = this.value;
            paymentOptions.change(function () {
                if ($(this).val() == 'bankAcc') {
                    $('#pinBox').show();
                }
                else
                    $('#pinBox').hide(); // hide div if value is not "bank account"
            });


        </script>

        

</body>
</html>
